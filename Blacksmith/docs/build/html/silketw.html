

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SilkETW &mdash; Blacksmith 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ATT&amp;CK Website" href="attack_website.html" />
    <link rel="prev" title="Erebor CloudFormation Deployment" href="mordor_erebor_aws.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Blacksmith
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="aws_setup.html">AWS Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure_setup.html">Azure Setup</a></li>
</ul>
<p class="caption"><span class="caption-text">Available Projects:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="mordor_labs.html">Mordor Labs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">SilkETW</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#templates">Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pre-requirements">Pre-Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pre-deployment">Pre-Deployment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#update-parameters-file">Update Parameters File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#automatic-deployment">Automatic Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#monitor-stack-build-logs">Monitor Stack Build Logs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#aws-cloudformation-console">AWS CloudFormation Console</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#connect-to-instances">Connect to Instances</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ssh-helk">SSH (HELK)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#browser-helk">Browser (HELK)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rdp-windows-workstation">RDP (Windows Workstation)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#delete-stacks">Delete Stacks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="attack_website.html">ATT&amp;CK Website</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure_sentinel2go.html">Azure Sentinel2Go</a></li>
</ul>
<p class="caption"><span class="caption-text">Licenses:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="license.html">GNU General Public License V3</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Blacksmith</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>SilkETW</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/silketw.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="silketw">
<h1>SilkETW<a class="headerlink" href="#silketw" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/fireeye/SilkETW">SilkETW &amp; SilkService</a> are flexible C# wrappers for ETW, they are meant to abstract away the complexities of ETW and give people a simple interface to perform research and introspection.
The project provides a straightforward interface for ETW events collection, filtering and ingestion.</p>
<p>The Blacksmith project maintains templates to deploy:</p>
<ul class="simple">
<li><p>A Windows 10 workstation with SilkETW running as a service and Winlogbeat configured to ship events.</p></li>
<li><p>A HELK instance with Logstash configurations already pre-loaded to parse ETW events and send them to an Elasticsearch index.</p></li>
</ul>
<div class="section" id="templates">
<h2>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Template</p></th>
<th class="head"><p>Format</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ec2-network-template</p></td>
<td><p><a class="reference external" href="https://github.com/hunters-forge/Blacksmith/blob/master/aws/SilkETW/cfn-templates/ec2-network-template.json">JSON</a></p></td>
</tr>
<tr class="row-odd"><td><p>helk-server-template</p></td>
<td><p><a class="reference external" href="https://github.com/hunters-forge/Blacksmith/blob/master/aws/SilkETW/cfn-templates/helk-server-template.json">JSON</a></p></td>
</tr>
<tr class="row-even"><td><p>windows-workstations-template</p></td>
<td><p><a class="reference external" href="https://github.com/hunters-forge/Blacksmith/blob/master/aws/SilkETW/cfn-templates/windows-workstations-template.json">JSON</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="pre-requirements">
<h2>Pre-Requirements<a class="headerlink" href="#pre-requirements" title="Permalink to this headline">¶</a></h2>
<p>Make sure you follow the <a class="reference external" href="https://blacksmith.readthedocs.io/en/latest/aws_setup.html">AWS setup steps</a> provided to use the Blacksmith project.</p>
<ul class="simple">
<li><p>An existing AWS Account</p></li>
<li><p>AWS CLI installed</p></li>
<li><p>EC2 Key Pair Available</p></li>
<li><p>10 mins of your day</p></li>
</ul>
</div>
<div class="section" id="pre-deployment">
<h2>Pre-Deployment<a class="headerlink" href="#pre-deployment" title="Permalink to this headline">¶</a></h2>
<p>First, make sure you <strong>git clone</strong> the main repo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> git clone https://github.com/hunters-forge/Blacksmith
<span class="gp">$</span> <span class="nb">cd</span> Blacksmith/aws/SilkETW/
</pre></div>
</div>
<div class="section" id="update-parameters-file">
<h3>Update Parameters File<a class="headerlink" href="#update-parameters-file" title="Permalink to this headline">¶</a></h3>
<p>You can update the parameters applied to the whole environment in the following folder:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> cfn-parameters/
</pre></div>
</div>
<p>Most of them are already filled out for you to build the basic SilkETW environment.
However, you must upate the following parametes:</p>
<ul class="simple">
<li><p>Edit <strong>cfn-parameters/ec2-network-parameters.json</strong> and set the parameter value for <strong>RestrictLocation</strong>. Set your house public IP.</p></li>
<li><p>Edit <strong>cfn-parameters/helk-server-parameters.json</strong> and <strong>cfn-parameters/windows-workstations-parameters.json</strong> and set the parameter value for <strong>KeyName</strong>. Set the key pair name you created in the pre-requirements step.</p></li>
</ul>
</div>
</div>
<div class="section" id="automatic-deployment">
<h2>Automatic Deployment<a class="headerlink" href="#automatic-deployment" title="Permalink to this headline">¶</a></h2>
<p>if you are still in the root directory of SilkETW (Blacksmith/aws/SilkETW), run the bash script ./deploy-silketw.sh</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ./deploy-silketw.sh
</pre></div>
</div>
</div>
<div class="section" id="monitor-stack-build-logs">
<h2>Monitor Stack Build Logs<a class="headerlink" href="#monitor-stack-build-logs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="aws-cloudformation-console">
<h3>AWS CloudFormation Console<a class="headerlink" href="#aws-cloudformation-console" title="Permalink to this headline">¶</a></h3>
<p>You can use the <a class="reference external" href="https://console.aws.amazon.com/cloudformation/home?region=us-east-1">AWS CloudFormation console</a> to see all your stacks, their events, templates uploaded and more.</p>
<a class="reference internal image-reference" href="_images/CFN-Stacks-View-SilkETW.png"><img alt="SilkETW" src="_images/CFN-Stacks-View-SilkETW.png" style="width: 480.0px; height: 160.79999999999998px;" /></a>
<p>All the templates that you sent over to AWS will start being processed immediately</p>
<a class="reference internal image-reference" href="_images/CFN-Stacks-SilkETW-Process.png"><img alt="SilkETW" src="_images/CFN-Stacks-SilkETW-Process.png" style="width: 480.0px; height: 99.6px;" /></a>
<p>You can click on each stack and get more information about the deployment</p>
<a class="reference internal image-reference" href="_images/CFN-Stacks-SilkETW-Events.png"><img alt="SilkETW" src="_images/CFN-Stacks-SilkETW-Events.png" style="width: 480.0px; height: 295.5px;" /></a>
<p>You can also see the specific template mapped to each stack</p>
<a class="reference internal image-reference" href="_images/CFN-Stacks-SilkETW-Template.png"><img alt="SilkETW" src="_images/CFN-Stacks-SilkETW-Template.png" style="width: 480.0px; height: 286.5px;" /></a>
<p>You will be able to see the <strong>CREATE_COMPLETE</strong> status for all of them when they are built successfully.</p>
<a class="reference internal image-reference" href="_images/CFN-Stacks-SilkETW-Complete.png"><img alt="SilkETW" src="_images/CFN-Stacks-SilkETW-Complete.png" style="width: 480.0px; height: 132.29999999999998px;" /></a>
</div>
</div>
<div class="section" id="connect-to-instances">
<h2>Connect to Instances<a class="headerlink" href="#connect-to-instances" title="Permalink to this headline">¶</a></h2>
<div class="section" id="ssh-helk">
<h3>SSH (HELK)<a class="headerlink" href="#ssh-helk" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ssh -v -i &lt;Private Key File&gt;.pem ubuntu@&lt;public-DNS-HELK-name&gt;
</pre></div>
</div>
</div>
<div class="section" id="browser-helk">
<h3>Browser (HELK)<a class="headerlink" href="#browser-helk" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>HELK User: helk</p></li>
<li><p>HELK User Password: hunt1ng! (you can change this in the parameters files)</p></li>
</ul>
<a class="reference internal image-reference" href="_images/CFN-Access-SilkETW-Kibana.png"><img alt="SilkETW" src="_images/CFN-Access-SilkETW-Kibana.png" style="width: 480.0px; height: 252.6px;" /></a>
</div>
<div class="section" id="rdp-windows-workstation">
<h3>RDP (Windows Workstation)<a class="headerlink" href="#rdp-windows-workstation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Username: Administrator</p></li>
<li><p>Password: P1ls3n! (You can change this in the parameters files)</p></li>
</ul>
<a class="reference internal image-reference" href="_images/CFN-Access-SilkETW-Windows.png"><img alt="SilkETW" src="_images/CFN-Access-SilkETW-Windows.png" style="width: 480.0px; height: 300.0px;" /></a>
</div>
</div>
<div class="section" id="delete-stacks">
<h2>Delete Stacks<a class="headerlink" href="#delete-stacks" title="Permalink to this headline">¶</a></h2>
<p>Once you are done using your stacks, I recommend to just delete them and build them again when you want to use them.
Delete the SilkETWNetworkStack last (Others depend on it, so you wont be able to deleted it unless the other ones are deleted first)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> aws --region us-east-1 cloudformation delete-stack --stack-name SilkETWWindowsWorkstationsStack
<span class="gp">$</span> aws --region us-east-1 cloudformation delete-stack --stack-name SilkETWHELKtack
<span class="gp">$</span> aws --region us-east-1 cloudformation delete-stack --stack-name SilkETWNetworkStack
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="attack_website.html" class="btn btn-neutral float-right" title="ATT&amp;CK Website" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mordor_erebor_aws.html" class="btn btn-neutral float-left" title="Erebor CloudFormation Deployment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Roberto Rodriguez

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>